<!DOCTYPE html>
<html>
  <head>
    <title>UI controls for JS object (using class)</title>
    <style>
      .mainContainer {
        display: table;
        border: 3px outset blue;
        background-color: lightgray;
        text-align: left;
        margin: 15px;
        padding: 15px;
      }
      .secondaryContainer {
        display: table-cell;
        border: 3px outset black;
        background-color: whitesmoke;
        text-align: left;
        margin: 15px;
        padding: 20px;
        max-width: 600px;
      }
      input {
        margin-bottom: 15px;
      }
      select {
        margin-bottom: 15px;
      }
    </style>
  </head>
  <body>
    <div class="mainContainer">
      <div class="secondaryContainer">
        <label><b>Name:</b></label>
        <input type="text" id="tbName" />
        <br />
        <label><b>Type:</b></label>
        <select id="selType">
          <option value="LED">LED</option>
          <option value="Halogen">Halogen</option>
          <option value="Standard">Standard</option>
        </select>
        <br />
        <label><b>Status:</b></label>
        <input type="radio" name="rdStatus" value="1" />ON
        <input type="radio" name="rdStatus" value="0" />OFF
        <br />
        <input type="button" value="Update" onclick="updateObject()" />
        <br />
        <input type="button" value="HelloWorld" onclick="fnHelloWorld()" />
        <br />
        <div id="divHelloWorld"></div>
      </div>
    </div>
    <script>
      let fnHelloWorld = () => {
        //grab my html control
        var divHelloWorld = document.getElementById("divHelloWorld");
        divHelloWorld.innerHTML = "<h2>Hello world!</h2>";
        currentIndex++;
        renderSelected();
      };
      //let create a class for demostration purposes
      class LightBulb {
        //constructor
        constructor(name, type, status) {
          //set class properties using input parameters
          this._name = name;
          this._type = type;
          //1 represents ON
          //0 represents OFF
          this._status = status;
        }

        //add getters and setters for each property
        get name() {
          return this._name;
        }
        set name(name) {
          this._name = name;
        }

        get type() {
          return this._type;
        }
        set type(type) {
          this._type = type;
        }

        get status() {
          return this._status;
        }
        set status(status) {
          this._status = status;
        }

        describeBuld() {
          //either return a string or print to the console or both
          var description = `Bulb name: ${this.name} type: ${this.type} status: ${this.status}`;
          console.log("bulb description", description);
          return description;
        }
        //any method you add here, will  be inherited by all sub-classes
      }

      //TESTING:
      //   class LG extends LightBulb {
      //     constructor() {
      //       super("LG", "LED", 0);
      //     }

      //     //add as many methods as you like
      //     //this will be available to LG class only!
      //     aMethod() {
      //       return "this does not exist on parent!";
      //     }
      //     describeBuld() {
      //       return "this is my implementation from parent";
      //     }
      //   }

      //   class Standard extends LightBulb {
      //     constructor() {
      //       super("Apple", "Standard", 1);
      //     }

      //     //add as many methods as you like
      //     //this will be available to LG class only!
      //     bMethod() {
      //       return "this does not exist on parent, nor other sub-classes!";
      //     }
      //   }

      //Create an object based on LightBulb class
      let lb1 = new LightBulb("LG", "LED", 1);
      //Create a second object and pass empty strings
      let lb2 = new LightBulb("Generic", "Standard", 0);

      //we might have multiple bulbs, so let's create an array to store them
      let bulbsArray = [];
      //add at least 1 object in the array otherwise is going to be empty
      bulbsArray.push(lb1);
      bulbsArray.push(lb2);

      //create an index to track "current or selected" bulb for display purposes
      let currentIndex = 0;

      //create a function to render/set html control(s) value(s) using selected object from our bulbsArray
      let renderSelected = () => {
        //print selected object to the console.
        console.log(bulbsArray[currentIndex]);
        //Get the html name control
        var nameCtrl = document.getElementById("tbName");
        //Set the html control value using LightBulb selected/current object
        nameCtrl.value = bulbsArray[currentIndex].name;
        //Get the html type (this is a select not a text control)
        var typeCtrl = document.getElementById("selType");
        //Set the html selected using....
        typeCtrl.value = bulbsArray[currentIndex].type;

        //Get the html status (this is a radio button not a text control)
        var statusCtrl = document.getElementsByName("rdStatus");
        //statusCtrl is an array, we need to iterate and check radio values
        //compare them with object values and if equal set html radio 'checked'
        //property to true
        for (var i = 0; i < statusCtrl.length; i++) {
          //check if values are equal between object and html ctrl.
          if (statusCtrl[i].value == bulbsArray[currentIndex].status) {
            //values match, set checked property to true
            statusCtrl[i].checked = true;
            break;
          }
        }
      };

      //Create update object from html controls function and call it from "Update" html button
      let updateObject = () => {
        //print object value before update
        console.log("before update:", bulbsArray[currentIndex]);
        //get the name from html ctl
        var name = document.getElementById("tbName").value;
        //validate if name is valid
        if (name == "" || !isNaN(name) || name == null) {
          alert("Invalid name!");
          return;
        }
        //set name object of selected bulsArray element
        bulbsArray[currentIndex].name = name;

        //get type from html ctrl
        var type = document.getElementById("selType").value;
        //validate type??
        bulbsArray[currentIndex].type = type;

        //get status from html ctrl
        var statusArray = document.getElementsByName("rdStatus");
        //iterate array to find "checked" item.
        for (var i = 0; i < statusArray.length; i++) {
          //is checked grab the value and set our object
          if (statusArray[i].checked) {
            //set our object using statusArray selected index value
            bulbsArray[currentIndex].status = parseInt(statusArray[i].value);
            break;
          }
        }
        //print selected object values after update
        console.log("after update:", bulbsArray[currentIndex]);
      };

      //call renderSelected at least once
      renderSelected();
    </script>
  </body>
</html>
